workflows:
  ios-workflow:
    name: "iOS Workflow"
    environment:
      flutter: stable
      xcode: latest

    scripts:
      - name: "Precache & Install Pods"
        script: |
          flutter precache --ios
          flutter pub get
          cd ios
          pod install
          cd ..

      - name: "Build iOS Release"
        script: |
          flutter build ipa --release

    artifacts:
      - build/ios/ipa/*.ipa

    publishing:
      ios:
        export_method: app-store

    code_signing:
      app_store_connect:
        apple_id: $APPLE_ID
        # team_id: $TEAM_ID (if needed)

      xcode_project:
        automatic_code_signing: true
        bundle_id: "com.ragtag.ragtag"
